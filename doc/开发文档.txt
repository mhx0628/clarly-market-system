澄迈市场管理微信小程序 项目开发文档
1. 项目概述
1.1 项目背景市场管理微信小程序旨在为澄迈菜篮子市场提供一个智能化的管理平台，整合商户自助服务、管理员协作办公以及领导监控功能，提升市场运营效率。项目预算控制在5万元以内，开发周期为55天。
1.2 项目目标

提供便捷的商户端功能，包括费用查询、报修投诉和支付。
支持管理员高效管理费用、工单和资产。
为领导提供实时数据看板和人员考评功能。
确保系统稳定运行，数据安全，符合验收标准。

1.3 参考文档

澄迈市场管理微信小程序设计与实施方案
软件开发服务合同
澄迈菜篮子市场收费系统功能需求表
澄迈菜篮子信息采集表

2. 系统架构
2.1 技术栈

前端：
微信小程序：WXML + WXSS + JavaScript
PC后台：React + Tailwind CSS
数据大屏：React + Recharts


后端：
语言：Node.js
框架：Express
数据库：MySQL 8.0（主从架构）
缓存：Redis（会话TTL≥48小时）


基础设施：
云服务器：CVM标准型（16核32G内存1TB硬盘）
部署：Docker + Nginx
数据安全：SM4加密（商户手机号）、HTTPS（支付链路）



2.2 系统模块

商户端：微信小程序，包含用户认证、费用中心、消息通知、服务工单、账户管理。
管理员端：PC后台 + 小程序，包含费用管理、催缴系统、资产管理、商户管理。
领导端：PC数据大屏，包含财务看板、公示系统、人员考评。
核心子系统：支付系统、报表引擎、基础设施。

2.3 数据库设计

商户表（Merchants）：
字段：stall_id, merchant_name, license_number, business_category, id_number, phone_number, water_fee, electricity_fee, rent
主键：stall_id
加密：phone_number（SM4）


费用表（Fees）：
字段：fee_id, stall_id, fee_type, amount, due_date, status, paid_date
外键：stall_id


工单表（WorkOrders）：
字段：order_id, stall_id, type, description, images, priority, status, created_at, resolved_at


管理员表（Admins）：
字段：admin_id, name, gender, department, role, permissions, phone, address


摊位表（Stalls）：
字段：stall_id, location, area, facilities, rental_status


报表表（Reports）：
字段：report_id, type, generated_at, data, format



3. 功能设计
3.1 商户端（微信小程序）

用户认证：
微信一键登录，绑定成功率≥99.5%，3次失败锁定1小时。
摊位绑定：扫码（加密二维码）或手动输入摊位号+短信验证码。


费用中心：
实时展示当前费用（逾期红色高亮）和历史账单（按月折叠），数据延迟≤10分钟。
电子收据下载（PDF带市场公章，符合税务规范）。


消息通知：
分级推送：缴费提醒（逾期前3天/当天）、滞纳金通知，微信模板消息到达率≥99%。
支持关闭非紧急通知。


服务工单：
提交维修/投诉/建议，支持图片上传，工单自动分类，实时显示处理状态。


账户管理：
更新联系信息和通知设置。



3.2 管理员端（PC + 小程序）

片区管理：
分配摊位管理区域，地图视图显示摊位分布。
每日任务列表，提高管理效率。


费用管理：
批量导入水电表读数（Excel模板，容错率≤1%），自动生成账单。
自定义滞纳金规则（起算日默认账单日后7天，日利率0.05%-0.5%）。


催缴系统：
自动化流程：逾期1天微信推送、3天短信+电话语音、7天红牌公示（需人工复核）。
红牌解除：缴清欠费后5分钟内自动撤销。


资产管理：
资产档案管理：台账、信息动态更新，每小时自动更新。
出入库管理：记录名称、规格、数量、单价。
日常使用跟踪：规范资产流动。


商户管理：
状态监控看板：区域空置率/欠费率、欠费TOP10商户实时排名，每小时更新，支持导出。



3.3 领导端（PC数据大屏）

财务看板：
核心指标：实时总缴费率（分区域/楼层）、月度环比增长率（图表化），预测误差率≤10%。
欠费分析：账龄分布（30/60/90天）、历史回款率预测。


公示系统：
自动生成周度缴费光荣榜/欠费公示榜，需人工审核后一键发布至商户端。


人员考评：
基于工单处理时效性和缴费率，积分评价与薪酬挂钩。
历史考评数据对比。



3.4 核心子系统

支付系统：
微信支付T+0结算，手续费≤0.38%。
支付状态与红牌系统实时联动（延迟≤60秒）。


报表引擎：
输出格式：PDF（防篡改水印）、Excel（保留计算公式）。
报表类型：日流水账、滞纳金明细表、缴费率分析。


基础设施：
云部署：CVM标准型，16核32G内存1TB硬盘，每日自动备份（保留30天）。
数据库：MySQL 8.0主从架构，Redis缓存会话。
数据安全：SM4加密、权限隔离、HTTPS。



4. 开发计划
4.1 开发阶段

紧急阶段（30天）：
核心功能：商户租金查询+电子收据、支付功能、红牌自动催缴、领导数据看板。
验收标准：
支付成功率≥95%（100笔测试）。
红牌联动：缴清欠费后5分钟内解除。
账单/数据看板数据误差率=0（抽样500/50条）。


付款节点：验收后支付40%。


优化阶段（25天）：
功能：滞纳金报表、资产管理。
付款节点：验收后支付10%.



4.2 双方责任

甲方（澄迈菜篮子市场管理办公室）：
签约后3日内提供商户清单及租金数据。
紧急阶段不新增需求。
提供硬件环境（CPU≥2核，内存≥4G）。


乙方：
紧急阶段每日提交进度简报。
优化阶段功能延迟不超过15天。



4.3 交付物

微信小程序（商户端）。
PC后台（管理员端、领导端）。
系统架构图、数据库设计说明书（含ER图）、接口安全审计报告。
200用户压力测试报告（JMeter）、支付链路全流程测试用例。
管理员操作视频、应急处理手册（含数据恢复流程）。

5. 测试与验证
5.1 测试计划

单元测试：每个功能模块单独测试（如微信登录、费用导入）。
集成测试：验证模块间交互（如支付与红牌系统联动）。
压力测试：200用户并发访问（JMeter）。
用户验收测试：邀请商户和管理人员参与，收集反馈。

5.2 验收标准

商户端：
扫摊位码查租金+历史账单，下载PDF收据（20个商户现场测试）。


支付系统：
支付成功率≥95%（100笔模拟交易）。
支付状态实时同步管理员端。


红牌系统：
欠费≥7天自动生成红牌，缴清后5分钟内撤牌（全流程日志追踪）。


数据看板：
数据汇总无误（全流程自动化采集）。


数据安全：
第三方安全扫描报告（SM4/HTTPS加密）。



5.3 检测工具

支付成功率：支付后台测试。
数据误差：Excel公式比对（=IF(原始表!A2=系统表!A2, "正确", "错误")）。
红牌延迟：日志时间戳差分计算。

6. 售后服务
6.1 维护保障

一年免费维护：系统升级、故障排查、数据备份。
每日自动备份，保留30天。

6.2 技术支持

服务方式：电话、邮件、远程维护、上门服务。
响应时间：电话指导优先，无法解决时24小时内上门。

6.3 培训

提供管理员操作视频、应急处理手册。
为商户和管理人员提供在线培训和操作手册。

7. 风险管理
7.1 风险识别

数据错误：甲方提供的数据不准确。
硬件不足：CPU<2核，内存<4G。
第三方服务故障：微信支付或短信服务中断。

7.2 应对措施

数据验证：导入时自动校验格式，错误数据隔离。
硬件要求：甲方需提供符合标准的运行环境。
免责声明：第三方故障或不可抗力不承担责任，需提供证明。

8. 合同条款
8.1 费用与支付

总价款：人民币50,000元（含15%管理费，实际开发费用42,500元）。
支付方式：签约后支付50%，紧急阶段验收后支付40%，优化阶段验收后支付10%。

8.2 违约责任

甲方：未按时支付，赔偿乙方合同价款的30%。
乙方：延期交付，每日扣款合同价款的0.1%（甲方数据问题顺延）。

8.3 保密条款

双方对商业秘密保密，期限5年。
未获同意不得向第三方泄露。

9. 附录
9.1 开发时间表



阶段
周期
核心功能
付款节点



紧急阶段
30天
商户租金查询+电子收据、支付、红牌催缴、数据看板
验收后40%


优化阶段
25天
滞纳金报表、资产管理
验收后10%


9.2 验收标准（紧急阶段）

支付成功率≥95%（100笔测试）。
红牌联动：缴清欠费后5分钟内解除。
账单/数据看板数据误差率=0（抽样500/50条）。

9.3 免责声明

第三方服务故障（需运营商证明）。
甲方数据错误引发的计算偏差。
硬件环境不达标（CPU<2核/内存<4G）。
不可抗力或用户操作不当导致的系统问题。
